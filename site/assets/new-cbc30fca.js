import{r as o,u as w,j as a}from"./index-85e0cf12.js";import{N as S,T as C,M as $}from"./mainBox-cd6b68eb.js";import{F as I}from"./fab-0ebbc665.js";import{I as r}from"./input-e1590388.js";import{p as d}from"./postalCode-32098db5.js";import"./useDispatch-0515d7d3.js";const B=()=>{const[e,u]=o.useState({insuredName:"",nik:"",alamat:"",telp:"",email:"",ktpFile:void 0,prov:"",kota:"",kecamatan:"",kelurahan:""}),h=w(),[x,v]=o.useState([]),[f,j]=o.useState([]),[k,N]=o.useState([]),[b,g]=o.useState([]),[p,F]=o.useState(),[m,y]=o.useState({prov:"",kota:"",kecamatan:"",kelurahan:""}),s=t=>{var n;const{name:l,value:c}=t.target;if(t.target instanceof HTMLInputElement&&t.target.type==="file"){const i=(n=t.target.files)==null?void 0:n[0];console.log("Selected File:",i),u(K=>({...K,ktpFile:i,ktpFileUrl:i?URL.createObjectURL(i):null}))}else l==="prov"||l==="kota"||l==="kecamatan"||l==="kelurahan"?(u(i=>({...i,[l]:c})),y(i=>({...i,[l]:t.target.selectedOptions[0].textContent}))):u(i=>({...i,[l]:c}))};o.useEffect(()=>{(async()=>{let l="";const c=await d(l);if(v(c),e.prov){l=e.prov;const n=await d(l);j(n)}if(e.kota){l=e.kota;const n=await d(void 0,l);N(n)}if(e.kecamatan){l=e.kecamatan;const n=await d(void 0,void 0,l);g(n)}if(e.kelurahan){l=e.kelurahan;const n=await d(void 0,void 0,void 0,l);F(n[0].postal_code)}})()},[e.prov,e.kota,e.kecamatan,e.kelurahan]);const P=t=>{t.preventDefault(),console.log(`ini dari new ${JSON.stringify(e,null,2)}`),h(`:${e.nik}`,{state:{insuredName:e.insuredName,NIK:e.nik,address:`${e.alamat} ${m.kelurahan} ${m.kecamatan} ${m.kota} ${m.prov} -${p}`,phone:e.telp,email:e.email,COB:"Harta Benda",ktp:e.ktpFile}})};return a.jsxs(a.Fragment,{children:[a.jsx(S,{}),a.jsx(C,{}),a.jsx($,{content:a.jsxs(a.Fragment,{children:[a.jsx("span",{className:"font-semibold text-xl mb-5",children:"New Application"}),a.jsxs("form",{onSubmit:P,children:[a.jsxs("div",{className:" relative my-5 ",children:[a.jsx("label",{htmlFor:"insuredName",className:"absolute left-3 -top-2.5 transition-all duration-200",children:"Insured Name"}),a.jsx(r,{id:"insuredName",name:"insuredName",placeholder:"",value:e.insuredName,onChange:s,additionalStyles:"rounded-xl pl-3"})]}),a.jsxs("div",{className:" relative mb-5 ",children:[a.jsx("label",{htmlFor:"nik",className:"absolute left-3 -top-2.5 transition-all duration-200",children:"NIK"}),a.jsx(r,{id:"nik",name:"nik",placeholder:"",value:e.nik,onChange:s,additionalStyles:"rounded-xl pl-3"})]}),a.jsxs("div",{className:" relative mb-5 ",children:[a.jsx("label",{htmlFor:"alamat",className:"absolute left-3 -top-2.5 transition-all duration-200",children:"Alamat"}),a.jsx(r,{id:"alamat",name:"alamat",placeholder:"",value:e.alamat,onChange:s,additionalStyles:"rounded-xl pl-3"})]}),a.jsxs("div",{className:"relative my-5",children:[a.jsx("label",{htmlFor:"prov",className:"absolute left-3 -top-2.5 transition-all duration-200",children:"Provinsi:"}),a.jsxs("select",{id:"prov",name:"prov",value:e.prov,onChange:s,className:"rounded-xl pl-3 w-full h-10 mt-5 font-Poppins font-semibold",children:[a.jsx("option",{value:"",children:"Pilih Provinsi"}),x.map((t,l)=>a.jsx("option",{value:t,children:t},l))]})]}),a.jsxs("div",{className:"relative my-5",children:[a.jsx("label",{htmlFor:"kota",className:"absolute left-3 -top-2.5 transition-all duration-200",children:"Kota:"}),a.jsxs("select",{id:"kota",name:"kota",value:e.kota,onChange:s,className:"rounded-xl pl-3 w-full h-10 mt-5 font-Poppins font-semibold",children:[a.jsx("option",{value:"",children:"Pilih Kota"}),f.map((t,l)=>a.jsx("option",{value:t.city_id,children:t.kota},l))]})]}),a.jsxs("div",{className:"relative my-5",children:[a.jsx("label",{htmlFor:"kecamatan",className:"absolute left-3 -top-2.5 transition-all duration-200",children:"Kecamatan:"}),a.jsxs("select",{id:"kecamatan",name:"kecamatan",value:e.kecamatan,onChange:s,className:"rounded-xl pl-3 w-full h-10 mt-5 font-Poppins font-semibold",children:[a.jsx("option",{value:"",children:"Pilih Kecamatan"}),k.map((t,l)=>a.jsx("option",{value:t.dis_id,children:t.dis_name},l))]})]}),a.jsxs("div",{className:"relative my-5",children:[a.jsx("label",{htmlFor:"kelurahan",className:"absolute left-3 -top-2.5 transition-all duration-200",children:"Kelurahan:"}),a.jsxs("select",{id:"kelurahan",name:"kelurahan",value:e.kelurahan,onChange:s,className:"rounded-xl pl-3 w-full h-10 mt-5 font-Poppins font-semibold",children:[a.jsx("option",{value:"",children:"Pilih Kelurahan"}),b.map((t,l)=>a.jsx("option",{value:t.subdis_id,children:t.subdis_name},l))]})]}),a.jsxs("div",{className:"relative my-5",children:[a.jsx("label",{htmlFor:"kodepos",className:"absolute left-3 -top-2.5 transition-all duration-200",children:"Kode Pos:"}),a.jsx("input",{id:"kodepos",name:"kodepos",placeholder:"",value:p,onChange:s,className:"rounded-xl pl-3 w-full h-10 mt-5 p-3 font-Poppins font-semibold",type:"text"})]}),a.jsxs("div",{className:" relative mb-5 ",children:[a.jsx("label",{htmlFor:"telp",className:"absolute left-3 -top-2.5 transition-all duration-200",children:"No Telp"}),a.jsx(r,{id:"telp",name:"telp",placeholder:"",value:e.telp,onChange:s,additionalStyles:"rounded-xl pl-3"})]}),a.jsxs("div",{className:" relative mb-5 ",children:[a.jsx("label",{htmlFor:"email",className:"absolute left-3 -top-2.5 transition-all duration-200",children:"Email"}),a.jsx(r,{id:"email",name:"email",placeholder:"",value:e.email,onChange:s,additionalStyles:"rounded-xl pl-3"})]}),a.jsxs("div",{className:" relative mb-5 ",children:[a.jsx("label",{htmlFor:"ktpFile",className:"absolute left-3 -top-2.5 transition-all duration-200",children:"KTP:"}),a.jsx("input",{id:"ktpFile",name:"ktpFile",type:"file",onChange:s,className:"rounded-xl pl-3 w-full h-10 mt-5 p-3 font-Poppins font-semibold"})]}),a.jsx("div",{className:"flex justify-center",children:a.jsx("button",{type:"submit",className:"bg-sky-500 h-8 w-32 text-white font-Poppins rounded-xl transform-gpu transition-transform duration-300 active:scale-90",children:"Send"})})]})]})}),a.jsx(I,{})]})};export{B as default};
