import{r as g,j as r}from"./index-85e0cf12.js";import{f as _}from"./formatcurrency-03c19d79.js";/*!
 * Signature Pad v4.1.6 | https://github.com/szimek/signature_pad
 * (c) 2023 Szymon Nowak | Released under the MIT license
 */class w{constructor(t,s,e,n){if(isNaN(t)||isNaN(s))throw new Error(`Point is invalid: (${t}, ${s})`);this.x=+t,this.y=+s,this.pressure=e||0,this.time=n||Date.now()}distanceTo(t){return Math.sqrt(Math.pow(this.x-t.x,2)+Math.pow(this.y-t.y,2))}equals(t){return this.x===t.x&&this.y===t.y&&this.pressure===t.pressure&&this.time===t.time}velocityFrom(t){return this.time!==t.time?this.distanceTo(t)/(this.time-t.time):0}}class p{constructor(t,s,e,n,i,h){this.startPoint=t,this.control2=s,this.control1=e,this.endPoint=n,this.startWidth=i,this.endWidth=h}static fromPoints(t,s){const e=this.calculateControlPoints(t[0],t[1],t[2]).c2,n=this.calculateControlPoints(t[1],t[2],t[3]).c1;return new p(t[1],e,n,t[2],s.start,s.end)}static calculateControlPoints(t,s,e){const n=t.x-s.x,i=t.y-s.y,h=s.x-e.x,l=s.y-e.y,a={x:(t.x+s.x)/2,y:(t.y+s.y)/2},o={x:(s.x+e.x)/2,y:(s.y+e.y)/2},c=Math.sqrt(n*n+i*i),d=Math.sqrt(h*h+l*l),x=a.x-o.x,f=a.y-o.y,m=d/(c+d),v={x:o.x+x*m,y:o.y+f*m},P=s.x-v.x,b=s.y-v.y;return{c1:new w(a.x+P,a.y+b),c2:new w(o.x+P,o.y+b)}}length(){let s=0,e,n;for(let i=0;i<=10;i+=1){const h=i/10,l=this.point(h,this.startPoint.x,this.control1.x,this.control2.x,this.endPoint.x),a=this.point(h,this.startPoint.y,this.control1.y,this.control2.y,this.endPoint.y);if(i>0){const o=l-e,c=a-n;s+=Math.sqrt(o*o+c*c)}e=l,n=a}return s}point(t,s,e,n,i){return s*(1-t)*(1-t)*(1-t)+3*e*(1-t)*(1-t)*t+3*n*(1-t)*t*t+i*t*t*t}}class E{constructor(){try{this._et=new EventTarget}catch{this._et=document}}addEventListener(t,s,e){this._et.addEventListener(t,s,e)}dispatchEvent(t){return this._et.dispatchEvent(t)}removeEventListener(t,s,e){this._et.removeEventListener(t,s,e)}}function j(u,t=250){let s=0,e=null,n,i,h;const l=()=>{s=Date.now(),e=null,n=u.apply(i,h),e||(i=null,h=[])};return function(...o){const c=Date.now(),d=t-(c-s);return i=this,h=o,d<=0||d>t?(e&&(clearTimeout(e),e=null),s=c,n=u.apply(i,h),e||(i=null,h=[])):e||(e=window.setTimeout(l,d)),n}}class y extends E{constructor(t,s={}){super(),this.canvas=t,this._drawningStroke=!1,this._isEmpty=!0,this._lastPoints=[],this._data=[],this._lastVelocity=0,this._lastWidth=0,this._handleMouseDown=e=>{e.buttons===1&&(this._drawningStroke=!0,this._strokeBegin(e))},this._handleMouseMove=e=>{this._drawningStroke&&this._strokeMoveUpdate(e)},this._handleMouseUp=e=>{e.buttons===1&&this._drawningStroke&&(this._drawningStroke=!1,this._strokeEnd(e))},this._handleTouchStart=e=>{if(e.cancelable&&e.preventDefault(),e.targetTouches.length===1){const n=e.changedTouches[0];this._strokeBegin(n)}},this._handleTouchMove=e=>{e.cancelable&&e.preventDefault();const n=e.targetTouches[0];this._strokeMoveUpdate(n)},this._handleTouchEnd=e=>{if(e.target===this.canvas){e.cancelable&&e.preventDefault();const i=e.changedTouches[0];this._strokeEnd(i)}},this._handlePointerStart=e=>{this._drawningStroke=!0,e.preventDefault(),this._strokeBegin(e)},this._handlePointerMove=e=>{this._drawningStroke&&(e.preventDefault(),this._strokeMoveUpdate(e))},this._handlePointerEnd=e=>{this._drawningStroke&&(e.preventDefault(),this._drawningStroke=!1,this._strokeEnd(e))},this.velocityFilterWeight=s.velocityFilterWeight||.7,this.minWidth=s.minWidth||.5,this.maxWidth=s.maxWidth||2.5,this.throttle="throttle"in s?s.throttle:16,this.minDistance="minDistance"in s?s.minDistance:5,this.dotSize=s.dotSize||0,this.penColor=s.penColor||"black",this.backgroundColor=s.backgroundColor||"rgba(0,0,0,0)",this.compositeOperation=s.compositeOperation||"source-over",this._strokeMoveUpdate=this.throttle?j(y.prototype._strokeUpdate,this.throttle):y.prototype._strokeUpdate,this._ctx=t.getContext("2d"),this.clear(),this.on()}clear(){const{_ctx:t,canvas:s}=this;t.fillStyle=this.backgroundColor,t.clearRect(0,0,s.width,s.height),t.fillRect(0,0,s.width,s.height),this._data=[],this._reset(this._getPointGroupOptions()),this._isEmpty=!0}fromDataURL(t,s={}){return new Promise((e,n)=>{const i=new Image,h=s.ratio||window.devicePixelRatio||1,l=s.width||this.canvas.width/h,a=s.height||this.canvas.height/h,o=s.xOffset||0,c=s.yOffset||0;this._reset(this._getPointGroupOptions()),i.onload=()=>{this._ctx.drawImage(i,o,c,l,a),e()},i.onerror=d=>{n(d)},i.crossOrigin="anonymous",i.src=t,this._isEmpty=!1})}toDataURL(t="image/png",s){switch(t){case"image/svg+xml":return typeof s!="object"&&(s=void 0),`data:image/svg+xml;base64,${btoa(this.toSVG(s))}`;default:return typeof s!="number"&&(s=void 0),this.canvas.toDataURL(t,s)}}on(){this.canvas.style.touchAction="none",this.canvas.style.msTouchAction="none",this.canvas.style.userSelect="none";const t=/Macintosh/.test(navigator.userAgent)&&"ontouchstart"in document;window.PointerEvent&&!t?this._handlePointerEvents():(this._handleMouseEvents(),"ontouchstart"in window&&this._handleTouchEvents())}off(){this.canvas.style.touchAction="auto",this.canvas.style.msTouchAction="auto",this.canvas.style.userSelect="auto",this.canvas.removeEventListener("pointerdown",this._handlePointerStart),this.canvas.removeEventListener("pointermove",this._handlePointerMove),this.canvas.ownerDocument.removeEventListener("pointerup",this._handlePointerEnd),this.canvas.removeEventListener("mousedown",this._handleMouseDown),this.canvas.removeEventListener("mousemove",this._handleMouseMove),this.canvas.ownerDocument.removeEventListener("mouseup",this._handleMouseUp),this.canvas.removeEventListener("touchstart",this._handleTouchStart),this.canvas.removeEventListener("touchmove",this._handleTouchMove),this.canvas.removeEventListener("touchend",this._handleTouchEnd)}isEmpty(){return this._isEmpty}fromData(t,{clear:s=!0}={}){s&&this.clear(),this._fromData(t,this._drawCurve.bind(this),this._drawDot.bind(this)),this._data=this._data.concat(t)}toData(){return this._data}_getPointGroupOptions(t){return{penColor:t&&"penColor"in t?t.penColor:this.penColor,dotSize:t&&"dotSize"in t?t.dotSize:this.dotSize,minWidth:t&&"minWidth"in t?t.minWidth:this.minWidth,maxWidth:t&&"maxWidth"in t?t.maxWidth:this.maxWidth,velocityFilterWeight:t&&"velocityFilterWeight"in t?t.velocityFilterWeight:this.velocityFilterWeight,compositeOperation:t&&"compositeOperation"in t?t.compositeOperation:this.compositeOperation}}_strokeBegin(t){this.dispatchEvent(new CustomEvent("beginStroke",{detail:t}));const s=this._getPointGroupOptions(),e=Object.assign(Object.assign({},s),{points:[]});this._data.push(e),this._reset(s),this._strokeUpdate(t)}_strokeUpdate(t){if(this._data.length===0){this._strokeBegin(t);return}this.dispatchEvent(new CustomEvent("beforeUpdateStroke",{detail:t}));const s=t.clientX,e=t.clientY,n=t.pressure!==void 0?t.pressure:t.force!==void 0?t.force:0,i=this._createPoint(s,e,n),h=this._data[this._data.length-1],l=h.points,a=l.length>0&&l[l.length-1],o=a?i.distanceTo(a)<=this.minDistance:!1,c=this._getPointGroupOptions(h);if(!a||!(a&&o)){const d=this._addPoint(i,c);a?d&&this._drawCurve(d,c):this._drawDot(i,c),l.push({time:i.time,x:i.x,y:i.y,pressure:i.pressure})}this.dispatchEvent(new CustomEvent("afterUpdateStroke",{detail:t}))}_strokeEnd(t){this._strokeUpdate(t),this.dispatchEvent(new CustomEvent("endStroke",{detail:t}))}_handlePointerEvents(){this._drawningStroke=!1,this.canvas.addEventListener("pointerdown",this._handlePointerStart),this.canvas.addEventListener("pointermove",this._handlePointerMove),this.canvas.ownerDocument.addEventListener("pointerup",this._handlePointerEnd)}_handleMouseEvents(){this._drawningStroke=!1,this.canvas.addEventListener("mousedown",this._handleMouseDown),this.canvas.addEventListener("mousemove",this._handleMouseMove),this.canvas.ownerDocument.addEventListener("mouseup",this._handleMouseUp)}_handleTouchEvents(){this.canvas.addEventListener("touchstart",this._handleTouchStart),this.canvas.addEventListener("touchmove",this._handleTouchMove),this.canvas.addEventListener("touchend",this._handleTouchEnd)}_reset(t){this._lastPoints=[],this._lastVelocity=0,this._lastWidth=(t.minWidth+t.maxWidth)/2,this._ctx.fillStyle=t.penColor,this._ctx.globalCompositeOperation=t.compositeOperation}_createPoint(t,s,e){const n=this.canvas.getBoundingClientRect();return new w(t-n.left,s-n.top,e,new Date().getTime())}_addPoint(t,s){const{_lastPoints:e}=this;if(e.push(t),e.length>2){e.length===3&&e.unshift(e[0]);const n=this._calculateCurveWidths(e[1],e[2],s),i=p.fromPoints(e,n);return e.shift(),i}return null}_calculateCurveWidths(t,s,e){const n=e.velocityFilterWeight*s.velocityFrom(t)+(1-e.velocityFilterWeight)*this._lastVelocity,i=this._strokeWidth(n,e),h={end:i,start:this._lastWidth};return this._lastVelocity=n,this._lastWidth=i,h}_strokeWidth(t,s){return Math.max(s.maxWidth/(t+1),s.minWidth)}_drawCurveSegment(t,s,e){const n=this._ctx;n.moveTo(t,s),n.arc(t,s,e,0,2*Math.PI,!1),this._isEmpty=!1}_drawCurve(t,s){const e=this._ctx,n=t.endWidth-t.startWidth,i=Math.ceil(t.length())*2;e.beginPath(),e.fillStyle=s.penColor;for(let h=0;h<i;h+=1){const l=h/i,a=l*l,o=a*l,c=1-l,d=c*c,x=d*c;let f=x*t.startPoint.x;f+=3*d*l*t.control1.x,f+=3*c*a*t.control2.x,f+=o*t.endPoint.x;let m=x*t.startPoint.y;m+=3*d*l*t.control1.y,m+=3*c*a*t.control2.y,m+=o*t.endPoint.y;const v=Math.min(t.startWidth+o*n,s.maxWidth);this._drawCurveSegment(f,m,v)}e.closePath(),e.fill()}_drawDot(t,s){const e=this._ctx,n=s.dotSize>0?s.dotSize:(s.minWidth+s.maxWidth)/2;e.beginPath(),this._drawCurveSegment(t.x,t.y,n),e.closePath(),e.fillStyle=s.penColor,e.fill()}_fromData(t,s,e){for(const n of t){const{points:i}=n,h=this._getPointGroupOptions(n);if(i.length>1)for(let l=0;l<i.length;l+=1){const a=i[l],o=new w(a.x,a.y,a.pressure,a.time);l===0&&this._reset(h);const c=this._addPoint(o,h);c&&s(c,h)}else this._reset(h),e(i[0],h)}}toSVG({includeBackgroundColor:t=!1}={}){const s=this._data,e=Math.max(window.devicePixelRatio||1,1),n=0,i=0,h=this.canvas.width/e,l=this.canvas.height/e,a=document.createElementNS("http://www.w3.org/2000/svg","svg");if(a.setAttribute("xmlns","http://www.w3.org/2000/svg"),a.setAttribute("xmlns:xlink","http://www.w3.org/1999/xlink"),a.setAttribute("viewBox",`${n} ${i} ${h} ${l}`),a.setAttribute("width",h.toString()),a.setAttribute("height",l.toString()),t&&this.backgroundColor){const o=document.createElement("rect");o.setAttribute("width","100%"),o.setAttribute("height","100%"),o.setAttribute("fill",this.backgroundColor),a.appendChild(o)}return this._fromData(s,(o,{penColor:c})=>{const d=document.createElement("path");if(!isNaN(o.control1.x)&&!isNaN(o.control1.y)&&!isNaN(o.control2.x)&&!isNaN(o.control2.y)){const x=`M ${o.startPoint.x.toFixed(3)},${o.startPoint.y.toFixed(3)} C ${o.control1.x.toFixed(3)},${o.control1.y.toFixed(3)} ${o.control2.x.toFixed(3)},${o.control2.y.toFixed(3)} ${o.endPoint.x.toFixed(3)},${o.endPoint.y.toFixed(3)}`;d.setAttribute("d",x),d.setAttribute("stroke-width",(o.endWidth*2.25).toFixed(3)),d.setAttribute("stroke",c),d.setAttribute("fill","none"),d.setAttribute("stroke-linecap","round"),a.appendChild(d)}},(o,{penColor:c,dotSize:d,minWidth:x,maxWidth:f})=>{const m=document.createElement("circle"),v=d>0?d:(x+f)/2;m.setAttribute("r",v.toString()),m.setAttribute("cx",o.x.toString()),m.setAttribute("cy",o.y.toString()),m.setAttribute("fill",c),a.appendChild(m)}),a.outerHTML}}const C=u=>{const t=g.useRef(null),s=g.useRef(null),e=()=>{var o;const a=(o=s.current)==null?void 0:o.toDataURL();a&&(u.setSign(a),u.setShowModal(!1))},n=5e6;let i=0;const h=Math.ceil(u.tsi*u.rateDasar),l=Math.ceil(u.tsi*u.ratePerluasan);return h+l>=n?i=35e3:i=25e3,g.useEffect(()=>{const a=t.current;if(a){const o={backgroundColor:"rgb(255, 255, 255)",penColor:"rgb(0, 0, 0)"};s.current=new y(a,o),s.current.clear()}},[]),r.jsx("div",{onClick:u.handleClose,className:"fixed top-0 left-0 w-screen h-screen flex items-center justify-center bg-gray-600 bg-opacity-50 z-50",children:r.jsxs("div",{className:"bg-white w-80 h-9/12 gap-5 rounded-lg overflow-y-auto flex flex-col justify-start items-center",children:[r.jsx("h1",{className:"font-semibold mb-5 mt-3 font-Poppins text-2xl",children:"Simulasi Premi"}),r.jsx("div",{className:"w-full px-5 flex flex-col justify-start items-start",children:r.jsxs("div",{className:"flex w-full flex-col justify-between",children:[r.jsx("span",{children:"Premi Dasar:"}),r.jsx("div",{children:r.jsxs("span",{children:[_(u.tsi.toString())," x ",r.jsx("br",{}),`${(u.rateDasar*1e3).toFixed(3)}‰`," : "," ",r.jsx("b",{children:_(h.toString())})]})})]})}),r.jsx("div",{className:"w-full px-5 flex flex-col justify-start items-start",children:r.jsxs("div",{className:"flex w-full justify-between flex-col",children:[r.jsx("span",{children:"Premi Perluasan:"}),r.jsx("div",{children:r.jsxs("span",{children:[_(u.tsi.toString())," x ",r.jsx("br",{})," ",`${(u.ratePerluasan*1e3).toFixed(3)}‰`," :"," ",r.jsx("b",{children:_(l.toString())})]})})]})}),u.premiTJH?r.jsx("div",{className:"w-full px-5 flex flex-col justify-start items-start",children:r.jsxs("div",{className:"flex w-full justify-between",children:[r.jsx("span",{children:"Premi TJH:"}),r.jsx("span",{children:r.jsx("b",{children:_(u.premiTJH.toString())})})]})}):r.jsx("div",{}),u.premiPA?r.jsx("div",{className:"w-full px-5 flex flex-col justify-start items-start",children:r.jsxs("div",{className:"flex w-full justify-between",children:[r.jsx("span",{children:"Premi PA:"}),r.jsx("span",{children:r.jsx("b",{children:_(u.premiPA.toString())})})]})}):r.jsx("div",{}),r.jsx("div",{className:"w-full px-5 flex flex-col justify-start items-start",children:r.jsxs("div",{className:"flex w-full justify-between",children:[r.jsx("span",{children:"Biaya Admin:"}),r.jsx("span",{children:r.jsx("b",{children:_(i.toString())})})]})}),r.jsx("div",{className:"w-full px-5 flex flex-col justify-start items-start",children:r.jsxs("div",{className:"flex w-full justify-between",children:[r.jsx("span",{children:"Total Premi:"}),r.jsx("span",{children:r.jsx("b",{children:_((h+l+(u.premiTJH?u.premiTJH:0)+(u.premiPA?u.premiPA:0)+i).toString())})})]})}),r.jsx("canvas",{className:"rounded-xl border-2 border-solid border-gray-600 shadow-xl",ref:t}),r.jsx("button",{className:"bg-primary h-8 w-32 mb-5 text-white text-xl font-Poppins rounded-xl transform-gpu transition-transform duration-300 active:scale-90",onClick:e,children:"Ok"})]})})};export{C as M,y as S};
