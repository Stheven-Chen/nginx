import{r as c,a as b,u as j,j as s,s as p}from"./index-85e0cf12.js";import{N as w,M as C,T as N}from"./mainBox-cd6b68eb.js";import{B as v}from"./barChart-1275012b.js";import{f as k}from"./formatcurrency-03c19d79.js";import{u as y}from"./useDispatch-0515d7d3.js";const O=()=>{const[t,a]=c.useState({minggu:"",bulan:"",tahun:"",showCom:""}),{username:r}=b(e=>e.username),[m,l]=c.useState("minggu"),x=j(),h=y();c.useEffect(()=>{(async()=>{const i=await(await fetch(`https://agentserver.stheven.website/${r}/commision`)).json();a({minggu:i[0].commission.mingguan,bulan:i[0].commission.bulanan,tahun:i[0].commission.tahunan,showCom:i[0].commission.mingguan})})()},[r]);const{minggu:n,bulan:f,tahun:u,showCom:d}=t,g=()=>{h(p({jumlah:Object.values(n).flatMap(e=>e).reduce((e,o)=>e+Number(o),0)})),x("withdraw")};return s.jsxs(s.Fragment,{children:[s.jsx(w,{}),s.jsx(C,{content:s.jsxs(s.Fragment,{children:[s.jsx("span",{className:"text-xl font-semibold font-Poppins",children:"Commision"}),s.jsxs("div",{className:"text-xl font-semibold flex justify-between items-center mt-5 font-Poppins",children:[n?s.jsxs("div",{className:"flex flex-col",children:[s.jsx("span",{children:`${k(Object.values(n).flatMap(e=>e).reduce((e,o)=>e+Number(o),0).toString())}`}),s.jsx("span",{className:"text-sm text-gray-500",children:"Commision This Month"})]}):s.jsx("span",{children:"-"}),s.jsx("button",{onClick:g,className:"bg-emerald-500 text-white rounded-xl p-2 text-lg shadow-lg transform-gpu transition-transform duration-300 active:scale-90",children:"Withdraw"})]}),s.jsx("div",{className:"flex flex-col mt-5 justify-center items-center font-Poppins",children:u&&s.jsxs("div",{className:"bg-white w-full rounded-xl shadow-lg p-4",children:[s.jsx("span",{className:"text-2xl font-semibold font-Poppins text-dark",children:"Premi"}),s.jsxs("div",{className:"flex justify-between items-center my-2 space-x-4",children:[s.jsx("button",{className:`rounded-full w-16 text-sm text-white ${m==="minggu"?"bg-sky-700":"bg-sky-500"}`,onClick:()=>{a({...t,showCom:n}),l("minggu")},children:"Week"}),s.jsx("button",{className:`rounded-full w-16 text-sm text-white ${m==="bulan"?"bg-sky-700":"bg-sky-500"}`,onClick:()=>{a({...t,showCom:f}),l("bulan")},children:"Month"}),s.jsx("button",{className:`rounded-full w-16 text-sm text-white ${m==="tahun"?"bg-sky-700":"bg-sky-500"}`,onClick:()=>{a({...t,showCom:u}),l("tahun")},children:"Year"})]}),s.jsx("div",{className:"mt-4 mx-auto max-w-lg ",children:s.jsx(v,{data:{labels:Object.keys(d),datasets:[{label:"Commision",data:Object.values(d),backgroundColor:"#E91E63"}]},options:{responsive:!0}})})]})})]})}),s.jsx(N,{})]})};export{O as default};
